@page "/managersToCreate/{pageNumber:int?}"
@using Lfm.Domain.Admin.Services.DataProviders
@using Lfm.Core.Common.Web.Models
@using Lfm.Domain.Admin.Models.ReviewModels
@inject IManagersProvider ManagersProvider;

<h1>Створені менеджери</h1>


@if (_pageModel == null)
{
    <p>
        <em>Loading...</em>
    </p>
}
else
{
    <a class="btn btn-lg btn-link btn-outline-primary" href="create-manager">Створити менеджера</a>

    <table class="table">
        <thead>
        <tr>
            <th>Email</th>
            <th>Name</th>
            <th>Phone number</th>
            <th>Creation Stamp</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var manager in _pageModel.PageList)
        {
            <tr>
                <td>@manager.Email</td>
                <td>@manager.Name</td>
                <td>@manager.PhoneNumber</td>
                <td>@manager.CreationStamp</td>
            </tr>
        }
        </tbody>
    </table>
    
    <nav class="mt-3">
        <ul class="pagination justify-content-center">
            
            @if (_pageModel.Pagination.PageNumber > 1)
            {
            <li class="page-item">
                <a class="page-link" href="managersToCreate/1">&lt;&lt;</a>
            </li>
            }
                                
            @foreach (var prev in _pageModel.Pagination.GetNumbersAllPreviousPages())
            {
            <li class="page-item">
                <a class="page-link"  href="managersToCreate/@prev" >@prev</a>
            </li>
            }
                
                                
            @if (_pageModel.Pagination.PageNumber > 0)
            {
            <li class="page-item active">
                <a class="page-link">@_pageModel.Pagination.PageNumber</a>
            </li>   
            }
                
                
            @foreach (var next in _pageModel.Pagination.GetNumbersAllNextPages())
            {
            <li class="page-item">
                <a class="page-link" href="managersToCreate/@next">@next</a>
            </li>
            }
                                
                
            @if (_pageModel.Pagination.PageNumber < _pageModel.Pagination.TotalPages)
            {
            <li class="page-item">
                <a class="page-link" href="managersToCreate/@(_pageModel.Pagination.TotalPages)">>></a>
            </li>
            }
            
        </ul>
    </nav>
}

@code
{
    [Parameter]
    public int? PageNumber { get; set; }
    
    BaseListPageModel<ManagerToCreateReviewModel> _pageModel;
    
    protected override async void OnInitialized()
    {
        var managers = await ManagersProvider.GetManagersToCreate(PageNumber ?? 1, 10);
        _pageModel = new BaseListPageModel<ManagerToCreateReviewModel>(managers, 10);
        await base.OnInitializedAsync();
    }
}