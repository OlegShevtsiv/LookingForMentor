@using Lfm.Web.Mvc.App.UIRenderers
@using LFM.Domain.Read.Providers
@model Lfm.Web.Mvc.Models.ViewsModels.UserCabinet.Mentor.EditMentorsProfileVM
@inject IMasterDataProvider MasterDataProvider;
@{
    ViewData["Title"] = "Edit general info";
    Layout = "../_UserCabinetLayout.cshtml";
}

<div class="col-md-8">
    <form asp-controller="UserCabinet" asp-action="EditMentorGeneralInfo" id="profile-form" method="post" enctype="multipart/form-data">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        
        <div class="form-group">
            <div class="edit-personal-data__user-photo">
                <img src="@(Url.Action("GetMentorAvatar", "UserCabinet"))" class="profile-pic" alt="">
                <input asp-for="ProfileImageFormFile" type="file" class="file-upload">
            </div>
            <a href="#" class="upload-button">Upload new Avatar</a>
        </div>

        <div class="form-group">
            <label>Name</label>
            <input asp-for="Name" class="form-control"/>
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label>Surname</label>
            <input asp-for="Surname" class="form-control"/>
            <span asp-validation-for="Surname" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label>Middle name</label>
            <input asp-for="MiddleName" class="form-control"/>
            <span asp-validation-for="MiddleName" class="text-danger"></span>
        </div>
        
        <div class="form-group">
            <label>About me</label>
            <textarea asp-for="AboutMe" rows="5" class="form-control"></textarea>
            <span asp-validation-for="AboutMe" class="text-danger"></span>
        </div>
        
        <div class="form-group">
            <label>My town</label>
            
            @{
                var towns = await MasterDataProvider.GetAllTowns();
                var firstFive = towns.Take(5).ToList();
                towns = towns.Skip(5).ToList();
                
              <select asp-for="TownId" class="form-control" style="max-height: 250px;">
                  @foreach (var t in firstFive)
                  {
                      <option value="@t.Id">@t.Name</option>
                  }
                  <optgroup label="----------------------">
                      @foreach (var t in towns)
                      {
                          <option value="@t.Id">@t.Name</option>
                      }
                  </optgroup>
              </select>   
            }

            <span asp-validation-for="TownId" class="text-danger"></span>
        </div>
        
        <div class="form-group">
            <label>Where can I conduct lessons?</label>
            @{
                int i = 1;
                foreach (var box in UserCabinetUiRenderer.StudyingPlacesCheckboxesInfo(Model.StudyingPlace))
                {
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="StudyingPlace" id="radio_@i" value="@box.Value" @box.Checked>
                        <label class="form-check-label" for="radio_@i">
                            @box.Name
                        </label>
                    </div>
                    
                    i++;
                }
                
                <span asp-validation-for="StudyingPlace" class="text-danger"></span>
            }
        </div>
         
        <div class="form-group">
            <label>My education</label>
            <textarea asp-for="Education" rows="2" class="form-control"></textarea>
            <span asp-validation-for="Education" class="text-danger"></span>
        </div>
        
        <button id="update-profile-button" type="submit" class="btn btn-primary">Save</button>
    </form>
</div>
